<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>类型转换</title>
</head>
<body>
    <script>
    //原始类型:Boolean null undefined number string symbol
    //对象: object

    // 显式类型转换:
    // Number()/String()/Boolean()
    // 原始类型转换:
    // 数值 → 数值
    // 字符串 → 如果可以被解析为数值则转换,否则NaN,空字符串→0
    // 布尔值 true → 1 / false → 0
    // undefined → NaN
    // null → 0
    // 对象类型转换: 先调用对象自身的valueOf方法,如果该方法返回原始类型的值,则直接对值使用Number方法,不再进行后续步骤
                //  如果valueOf方法返回复合类型的值,再调用对象自身的toString方法,如果toString方法返回原始类型的值,则对该值使用Number方法,不再进行后续步骤
                //  通过toString方法返回的是复合类型的值,则报错

    let a = {
        a:1
    };
    console.log(a.valueOf()); // 返回{a:1},然后再toString() 
    console.log(a.toString()); // "[object Object]" Number("[object Object]")转换为NaN
    
    console.log('----------------------------------------------')

    // 显式类型转换 String()
    // 原始类型转换 :
    // 数值: 转换为响应字符串
    // 字符串: 转换后还是原来的值
    // 布尔值: true → "true" false → "false"
    // undefined → "undefined"
    // null → "null"
    // 对象类型转换: 先调用toString(),如果toString()返回的是原始类型的值,则对改值使用toString()方法,不再进行以下步骤
    // 如果toString()方法返回的是复合类型的值, 再调用valueOf(), 如果valueOf()返回的是原始类型的值,则对该值使用String()方法,不再进行以下步骤
    // 如果valueOf()方法返回的是复合类型的值,则报错

    let b = {
        a:1,
    };
    console.log('b', String(b)); //b [object Object]
    console.log(b.toString()); //[object Object]
    console.log('----------------------------------------------')
    let c = {
        a:1,
        toString:function() {
            return {
                c: 2,
            }
        },
        valueOf:function () {
            return 'c';
        }
    };
    console.log('c', String(c)); //c c
    console.log(c.toString()); //{c: 2}

    //当输入值是一个对象,会先调对象的toString()方法,这时toString()返回的是一个对象,继续调用valueOf(),valueOf()返回'c',然后再用String()转换'c'
    
    //布尔类型转换
    //显式类型转换 Boolean()
    //原始类型转换: (undefined/null/-0/+0/NaN/'') → false
    //              其余为true

    //隐式类型转换(程序自动转换)
// 1.四则运算(+-*/)
// 2.判断语句 if
// 3.Native调用 console.log() alert()

//chrome
// {}+[] = 0 ,因为把{}看作了一个代码块,直接变成了+[]
// {}+{} = "[object Object][object Object]"

// firefox
// {}+[] = 0 ,因为把{}看作了一个代码块,直接变成了+[]
// {}+{} = NaN ,依旧把第一个{}看作了代码块,+{} = NaN

console.log(typeof null); // object
console.log('----------------------------------------------')
console.log('[]+[]:',[]+[]); //
console.log('[]+{}:',[]+{}); //[object Object]
console.log('{}+[]:',{}+[]); //[object Object]
console.log('{}+{}:',{}+{}); //[object Object][object Object]
console.log('true+true:',true+true); //2
console.log('1+{a:1}:',1+{a:1}); //1[object Object]

    </script>
</body>
</html>